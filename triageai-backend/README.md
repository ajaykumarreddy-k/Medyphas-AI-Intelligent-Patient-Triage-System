# TriageAI Backend Service

The heavy-lifting intelligence engine for Medyphas AI. This service exposes REST endpoints for triage, authentication, and serving AI predictions.

## üß† Machine Learning Architecture

The core of our intelligence lies in the `ml/` directory. We use a **Random Forest Classification** approach due to its high accuracy and interpretability for medical tabular data.

### Model Files (`.pkl`)
These files are generated by running `ml/train_quickfix.py`:

| File | Description |
|------|-------------|
| **`quickfix_model.pkl`** | The trained Random Forest classifier. It takes a vector of 132 binary symptom indicators and outputs a predicted `prognosis` (Disease). |
| **`label_encoders.pkl`** | A dictionary of `LabelEncoder` objects. Used to decode the numeric `prognosis` back into a human-readable string (e.g., "0" -> "Fungal infection"). |

### Training Pipeline
1.  **Data Ingestion**: Specific medical datasets (Symptom-Disease) are loaded.
2.  **Preprocessing**: Symptoms are one-hot encoded; Prognosis is label encoded.
3.  **Training**: `RandomForestClassifier` is fitted with 70/30 train-test split.
4.  **Serialization**: The trained artifacts are saved to disk for high-performance inference (microsecond latency).

## üöÄ API Endpoints

### AI / Intelligence
- `POST /api/quick-fix`: Accepts a list of symptoms (e.g., `["itching", "skin_rash"]`), runs inference using `quickfix_model.pkl`, and returns the disease + recommended medication.
- `GET /api/symptoms`: Returns the master list of 132+ supported symptoms for the frontend autocomplete.

### Triage
- `POST /api/triage`: Rule-based engine that calculates a risk score based on vitals (HR, BP, Temp) and assigns a priority level (Normal, Urgent, Critical).

## üõ†Ô∏è Setup & Run

```bash
# 1. Install Dependencies
pip install -r requirements.txt

# 2. Train Model (Generates .pkl files)
python ml/train_quickfix.py

# 3. Run Server
uvicorn app.main:app --reload --port 8000
```
